# ==============================================================================
# CONFIGURATION AND SETUP
# ==============================================================================

# Disable built-in status bar to use custom UI
%wd

# -----------------------------------------------------------------------------
# FONT LOADING
# -----------------------------------------------------------------------------
# Load fonts for different UI elements
%Fl(4,14-InterTight-Medium-14pt-CJK.fnt)   # Medium bold text (12pt equivalent)

# -----------------------------------------------------------------------------
# ICON PRELOADING
# -----------------------------------------------------------------------------
# Battery status icons
%xl(B,batteryStatus-4.bmp,0,0,11)

# Playback mode icons (repeat and shuffle)
%xl(REPEATALL,repeat_all.bmp,0,0)
%xl(REPEATONE,repeatOne.bmp,0,0)
%xl(REPEATSHUFFLE,repeatShuffle.bmp,0,0)
%xl(REPEATNULL,repeat_null.bmp,0,0)
%xl(SHUFFLE,shuffle.bmp,0,0)
%xl(SHUFFLENULL,shuffle_null.bmp,0,0)

# Volume icons (4 states)
%xl(VolumeIcons,VolumeIcons.bmp,0,0,4)

# Lock screen icon
%xl(lock,lock.bmp,0,0)

# Play icon
%xl(PLAY,play_small.bmp,0,0)

# Rounded corner caps for UI bars
%xl(LCAP,bar-left-cap.bmp,0,0)
%xl(RCAP,bar-right-cap.bmp,0,0)
%xl(TCAP,bar-top-cap.bmp,0,0)
%xl(BCAP,bar-bottom-cap.bmp,0,0)

# USB backdrop
%xl(USB,usbBackdrop.bmp,0,0)

# ==============================================================================
# BACKGROUND AND STRUCTURAL ELEMENTS
# ==============================================================================

# -----------------------------------------------------------------------------
# FULL SCREEN BACKGROUND
# -----------------------------------------------------------------------------
# Clear entire screen with light gray background first
%V(0,0,320,240,-)
%VB
%Vb(E2E2E1)

# -----------------------------------------------------------------------------
# TOP BAR BACKGROUND
# -----------------------------------------------------------------------------
# Middle section of top bar (solid light background, between rounded caps)
%V(16,4,-16,24,-)
%VB
%Vb(FFFFFF)

# -----------------------------------------------------------------------------
# BOTTOM BAR BACKGROUND
# -----------------------------------------------------------------------------
# Middle section of bottom bar (solid light background, between rounded caps)
%V(16,-28,-16,24,-)
%VB
%Vb(FFFFFF)

# Reset to full screen viewport
%V(0,0,-,-,-)

# -----------------------------------------------------------------------------
# ROUNDED CORNER CAPS (drawn after backgrounds)
# -----------------------------------------------------------------------------
# Top bar side caps
%V(8,4,8,24,-)
%xd(LCAP)
%V(-16,4,8,24,-)
%xd(RCAP)

# Bottom bar side caps
%V(8,-28,8,24,-)
%xd(LCAP)
%V(-16,-28,8,24,-)
%xd(RCAP)

# -----------------------------------------------------------------------------
# UI VIEWPORT (list items area)
# -----------------------------------------------------------------------------
# Define the scrollable list area between top and bottom bars
%Vi(menu,16,32,-16,-29,4)
%Vf(555555)           # Dark gray text
%Vb(EAEAEA)           # Light background

# ==============================================================================
# TOP BAR ELEMENTS
# ==============================================================================

# -----------------------------------------------------------------------------
# TIME
# -----------------------------------------------------------------------------
%V(16,10,50,16,4)
%Vf(1A1A1A)
%s%cH:%cM

# -----------------------------------------------------------------------------
# CURRENT DIRECTORY
# -----------------------------------------------------------------------------
%V(52,10,120,16,4)
%Vf(1A1A1A)
%s%Lt

# -----------------------------------------------------------------------------
# SHUFFLE ICON
# -----------------------------------------------------------------------------
%V(180,9,14,14,-)
%?if(%ps,=,s)<%xd(SHUFFLE)|%xd(SHUFFLENULL)>

# -----------------------------------------------------------------------------
# REPEAT ICON
# -----------------------------------------------------------------------------
%V(202,9,30,14,-)
%?mm<%xd(REPEATNULL)|%xd(REPEATALL)|%xd(REPEATONE)|%xd(REPEATSHUFFLE)>

# -----------------------------------------------------------------------------
# VOLUME ICON
# -----------------------------------------------------------------------------
%V(-95,9,16,14,-)
%?if(%pv,=,-90)<%xd(VolumeIcons,1)|%?if(%pv,<,-40)<%xd(VolumeIcons,2)|%?if(%pv,<,-10)<%xd(VolumeIcons,3)|%xd(VolumeIcons,4)>>>

# -----------------------------------------------------------------------------
# BATTERY ICON
# -----------------------------------------------------------------------------
%V(-78,9,59,14,-)
%?bp<%?bl<%xd(Bg)|%xd(Bg)|%xd(Bh)|%xd(Bh)|%xd(Bh)|%xd(Bi)|%xd(Bi)|%xd(Bj)|%xd(Bj)|%xd(Bj)|%xd(Bj)|%xd(Bk)|%xd(Bk)|%xd(Bk)|%xd(Bk)|%xd(Bk)|%xd(Bk)|%xd(Bk)|%xd(Bk)|%xd(Bk)|%xd(Bk)|%xd(Bk)>|%?bl<%xd(Ba)|%xd(Ba)|%xd(Ba)|%xd(Bb)|%xd(Bb)|%xd(Bb)|%xd(Bb)|%xd(Bc)|%xd(Bc)|%xd(Bc)|%xd(Bc)|%xd(Bc)|%xd(Bd)|%xd(Bd)|%xd(Bd)|%xd(Bd)|%xd(Bd)|%xd(Be)|%xd(Be)|%xd(Be)|%xd(Bf)|%xd(Bf)>>

# ==============================================================================
# BOTTOM BAR ELEMENTS
# ==============================================================================

# -----------------------------------------------------------------------------
# PLAY ICON
# -----------------------------------------------------------------------------
%V(16,-23,14,14,-)
%?mp<%xd(PLAY)|%xd(PLAY)|%xd(PLAY)|%xd(PLAY)>

# -----------------------------------------------------------------------------
# TRACK INFO
# -----------------------------------------------------------------------------
%V(34,-23,-20,14,4)
%Vf(1A1A1A)
%s%?it<%it|%fn> - %?ia<%ia|Play some music.>

# ==============================================================================
# SPECIAL SCREENS
# ==============================================================================

# -----------------------------------------------------------------------------
# VIEWPORT CLEARING
# -----------------------------------------------------------------------------
%?if(%cs, =, 21)<%VI(clearScreen)%Vd(usb)|%VI(menu)>

%Vi(clearScreen,0,0,1,1,-)

# -----------------------------------------------------------------------------
# USB SCREEN
# -----------------------------------------------------------------------------
%Vl(usb,0,0,320,240,-)
%xd(USB)
